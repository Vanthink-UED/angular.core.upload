"use strict";angular.module("van.core.upload",[]).directive("vanCoreUpload",["$http",function(e){return{restrict:"A",scope:{onSuccessUpload:"&?",extensionError:"&?",inputOfFile:"@",enableDrag:"@",extensions:"@",data:"&"},link:function(t,n,i){function r(e,t,n){var i={extensions:[],inputOfFile:""},t=angular.extend(i,t);e.css("position","relative");var r='<form  method="post" enctype="multipart/form-data" action="'+t.url+'">';r+='<input name="'+t.inputOfFile+'" type="file" accept="image/*" />';var a=[];if("object"==typeof n)for(var o in n){var p='<input type="hidden" name='+o+'> value="'+n[o]+'"';a.push(p)}r+=a.join("")+"</form>";{var l=$(r);l.find('input[type="file"]')}l.css("display","none");var s=e.width()<=0?132:e.width(),d=e.height()<=0?32:e.height();l.css({cursor:"pointer",display:"block",position:"absolute",left:0,top:0,width:s,height:d,cursor:"hand",opacity:0,overflow:"hidden"}),l.find('input[type="file"]').css({width:s,height:d});return e.append(l),l}if(!i.url)return console.error("url not setted");var a=r(n,i,t.data),o=a.find('input[type="file"]');o.on("change",function(r){var p=o.val().replace(/C:\\fakepath\\/i,""),l=p.substring(p.lastIndexOf(".")+1);if(t.extensions){var s=new RegExp("^["+t.extensions.replace(",","|")+"]+$","i");if(!s.test(l))return"function"==typeof t.extensionError?console.error("file type not support"):t.extensionError()}var d=new FormData;$.each(r.target.files,function(e,t){d.append(i.inputOfFile,t)}),"object"==typeof t.data&&$.each(t.data,function(e,t){d.append(e,t)});var f='<div class="core-upload-svg-icon" style="position:absolute;left:0;top:0;width:100%;height:100%;text-align:center;background-color:';f+=n.css("background-color"),f+=';">',f+='<svg version="1.1" id="loader-1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="25px" height="25px" style="vertical-align:middle;" viewBox="0 0 50 50" style="enable-background:new 0 0 50 50;" xml:space="preserve"><path fill="#fff" d="M25.251,6.461c-10.318,0-18.683,8.365-18.683,18.683h4.068c0-8.071,6.543-14.615,14.615-14.615V6.461z" transform="rotate(293.601 25 25)"><animateTransform attributeType="xml" attributeName="transform" type="rotate" from="0 25 25" to="360 25 25" dur="0.6s" repeatCount="indefinite"></animateTransform></path></svg>',f+="</div>";var u=angular.element(f);n.append(u),e({url:i.url,method:"POST",data:d,headers:{"Content-Type":void 0}}).then(function(e){a.find("input[type=file]").val(""),a.find("input[type=file]").attr("disabled",!1),u.remove(),t.onSuccessUpload(e)},function(e){a.find("input[type=file]").val(""),a.find("input[type=file]").attr("disabled",!1),u.remove(),console.error(e)}),a.find("input[type=file]").attr("disabled","disabled")})}}}]);
//# sourceMappingURL=angular.core.upoad.min.js.map